pipeline {
    agent any

    stages {
        stage('Input Stage') {
            steps {
                script {
                    // Define the first parameter with choices
                    def firstChoice = input(
                        message: 'Select the environment:',
                        parameters: [
                            choice(name: 'ENVIRONMENT', choices: ['Development', 'Staging', 'Production'], description: 'Select the environment')
                        ]
                    )

                    // Conditionally define the second parameter based on the first choice
                    def secondChoice
                    if (firstChoice == 'Development') {
                        secondChoice = input(
                            message: 'Select the feature for Development:',
                            parameters: [
                                choice(name: 'FEATURE', choices: ['Feature A', 'Feature B'], description: 'Select the feature for Development')
                            ]
                        )
                    } else if (firstChoice == 'Staging') {
                        secondChoice = input(
                            message: 'Select the feature for Staging:',
                            parameters: [
                                choice(name: 'FEATURE', choices: ['Feature C', 'Feature D'], description: 'Select the feature for Staging')
                            ]
                        )
                    } else if (firstChoice == 'Production') {
                        secondChoice = input(
                            message: 'Select the feature for Production:',
                            parameters: [
                                choice(name: 'FEATURE', choices: ['Feature E', 'Feature F'], description: 'Select the feature for Production')
                            ]
                        )
                    }
                    
                    // Output the selected values for verification
                    echo "Selected Environment: ${firstChoice}"
                    echo "Selected Feature: ${secondChoice}"
                }
            }
        }

        stage('Build') {
            steps {
                echo 'Build step running...'
            }
        }
    }
}
